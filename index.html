<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Jenny to Assholes</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>
  <body>
    <section class="section py-4">
      <div class="container">
        <h1 class="title">Jenny to Assholes</h1>
        <div class="columns is-vcentered is-mobile">
          <div class="column is-narrow">
            <figure class="image is-squared">
              <img class="is-rounded" src="images/jenny.jpg">
            </figure>
          </div>
          <div class="column is-narrow-tablet">
            <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_2z4qmxlj.json"  background="transparent"  speed="1"  style="width: 100%; height: 150px;"    autoplay></lottie-player>

          </div>
          <div class="column is-narrow poop" >
            &#128169;
          </div>
        </div>
        <p class="subtitle">
          Un semplice tool per convertire i messaggi per chi non si trova a suo
          agio con i vocali.
        </p>
      </div>
    </section>
    <section class="section py-4" x-data="{ 
      tab: 'easy',
      message: '',
      changedMessage: '',

      changeMessage() { 
        let changedMessage
        switch (this.tab) {
          case 'hard':
            changedMessage = this.message.replace(/[aeiouAEIOU]/g, '')
            break;
          case 'easy':
            changedMessage = this.message
              .replace(/[aA]/g, '4')
              .replace(/[eE]/g, '3')
              .replace(/[iI]/g, '1')
              .replace(/[oO]/g, '0')
            break;
          default:
            changedMessage = ''
        }
        this.changedMessage = changedMessage
      },

      copyToClipboard() {
        navigator.clipboard.writeText(this.changedMessage);
        alert('Testo copiato: ' + this.changedMessage);
      }

     }">
      <div class="container">
        <div class="tabs is-centered" id="tab_wrapper">
          <ul>
            <li 
              :class="tab == 'easy' ? 'is-active' : ''" 
              @click.prevent="tab = 'easy'; changeMessage()"
            >
              <a>Easy</a>
            </li>
            <li 
              :class="tab == 'hard' ? 'is-active' : ''" 
              @click.prevent="tab = 'hard'; changeMessage()"
            >
              <a>Hard</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="container">
          <div class="box">
            <div class="field">
              <label class="label">Messaggio</label>
              <div class="control">
                <input
                  x-model="message"
                  @keyup="changeMessage()"
                  class="input"
                  type="text"
                  placeholder="Inserisci il tuo messaggio"
                />
              </div>
            </div>
            <div class="content">
              <p x-text="changedMessage"></p>
            </div>
            <input id="changed-message" aria-hidden="true" hidden x-model="changedMessage"></input>

            <div class="field is-grouped">
              <div class="control">
                <button class="button is-link" @click="copyToClipboard()">Copia</button>
              </div>
              <div class="control">
                <button class="button is-danger" @click="message = ''; changeMessage()">Reset</button>
              </div>
            </div>
          </div>  
      </div>
    </section>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  </body>
</html>
